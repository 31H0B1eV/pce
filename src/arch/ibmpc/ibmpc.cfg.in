# pce.cfg
# Example config file

# $Id$

section pc {
	# Enable access to the RTC
	rtc = 1

	section cpu {
		# 8086, 8088, V20, V30, 80186, 80188
		model = "80186"

		# This sets the CPU speed with respect to the emulated
		# system clock. A value of 1 emulates a 4.77MHz CPU.
		# A higher value emulates a faster CPU but also takes up
		# more host CPU time.
		speed = 8

		# The emulated CPU clock can also be specified directly
		# in Herz. Setting clock overrides the speed parameter.
		#clock = 4772728
	}

	# Multiple "ram" sections may be present
	section ram {
		# The linear base address
		address = 0x00000

		# The size in bytes
		size = 655360

		# The size in KB
		#sizek = 640

		# The size in MB
		#sizem = 1
	}

	# Multiple "rom" sections may be present
	section rom {
		# The file from which the rom code is loaded
		file = "PCE_DIR_DATA/pce/ibmpc.rom"

		# The linear base address
		address = 0xf0000

		# The rom size in bytes
		size = 65536
	}

	# "load" sections are processed after all the "ram" and "rom"
	# sections. It is possible to overwrite read-only blocks, too.
	section load {
		# Intel hex file
		format = "ihex"
		file = "ibmpc.ihex"
	}

	#section load {
	#	# Motorola S-Record file
	#	format = "srec"
	#	file = "ibmpc.srec"
	#}

	section load {
		format = "binary"
		file = "rom.bin"
		address = 0xf0000
	}

	# 8253 PIT
	section pit {
		# Don't change this
		address = 0x40
	}

	section ems {
		# The EMS size in KB
		size = 8192

		# The page frame segment
		segment = 0xe000
	}

	section xms {
		# The maximum XMS memory used in KB
		xms_size = 32768

		# Define one UMB
		umb_size = 65536
		umb_segm = 0xd000

		# Enable the HMA
		hma = 1
	}

	# Multiple "terminal" sections may be present
	section terminal {
		driver = "sdl"

		# Define a border around the image
		border = 0
	}

	section terminal {
		driver = "x11"
	}

	section terminal {
		driver = "null"
	}

	# Multiple "video" sections may be present. The first one will be
	# used unless a video adapter type is specified on the command
	# line.
	section video {
		device = "ega"

		# The default width and height that are used for modes
		# that are not specified.
		w = 640
		h = 400

		mode_80x25_w = 640
		mode_80x25_h = 400

		mode_320x200_w = 640
		mode_320x200_h = 480

		mode_640x200_w = 640
		mode_640x200_h = 480

		mode_640x350_w = 640
		mode_640x350_h = 480
	}

	section video {
		device = "cga"

		io = 0x3d4
		membase = 0xb8000
		
		# Don't change this
		memsize = 16384

		# The default width and height that are used for modes
		# that are not specified.
		w = 640
		h = 400

		mode_80x25_w = 640
		mode_80x25_h = 400

		# 320 * 200 * 4
		mode_320x200_w = 640
		mode_320x200_h = 480

		# 640 * 200 * 2
		mode_640x200_w = 640
		mode_640x200_h = 480
	}

	section video {
		device = "hgc"

		io = 0x3b4
		membase = 0xb0000
		
		# Only 32768 or 65536 makes sense.
		memsize = 65536

		color7 = 0xe89050
		color15 = 0xfff0c8

		gcolor0 = 0x000000
		gcolor1 = 0xf0f0f0

		# The default width and height that are used for modes
		# that are not specified.
		w = 640
		h = 400

		mode_80x25_w = 640
		mode_80x25_h = 400

		# 720 * 348 * 2
		mode_720x348_w = 720
		mode_720x348_h = 540
	}

	section video {
		device = "mda"

		io = 0x3b4
		membase = 0xb0000
		
		# Don't change this
		memsize = 4096

		color0 = 0x000000
		color1 = 0xc0c000
		color7 = 0x00c000
		color9 = 0xc0f000
		color15 = 0x00f000

		# The default width and height that are used for modes
		# that are not specified.
		w = 640
		h = 400

		mode_80x25_w = 640
		mode_80x25_h = 400
	}

	section serial {
		address = 0x3f8
		irq = 4

		# Valid values for uart are: "8250", "16450"
		uart = "8250"

		# An output file
		file = "serport.out"

		# If support for host serial port emulation is compiled in
		# this tty device will be connected to the serial port.
		device = "/dev/ttyS0"
	}

	section mouse {
		address = 0x2f8
		irq = 3
		speed_x_mul = 3
		speed_x_div = 2
		speed_y_mul = 3
		speed_y_div = 2
	}

	section parport {
		address = 0x378
		file = "parport.out"
	}


	# Disk types are:
	# "image"  A raw image file. "c", "h" and "s" must be specified.
	# "dosemu" A DOSEMU style hard disk image file
	# "pce"    A PCE style disk image file
	# "ram"    A RAM disk. If a file name is specified, the contents
	#          of that file are loaded into the RAM disk (but the file
	#          is never altered).
	# "partition"  A partitioned disk that is patched together from
	#              multiple raw images.
	# "auto"   Try to autodetect the image file format. This works for
	#          DOSEMU and PCE disk images as well as raw images starting
	#          with a DOS boot sector.
	#
	# The c, h, s parameters determine the actual image file layout, the
	# visible_c, visible_h, visible_s parameters determine the disk size
	# as reported by the BIOS.
	#
	# If optional is set to 1 no error will be reported if the disk
	# can't be opened.

	section disk {
		drive = 0
		optional = 1
		type = "image"
		file = "pce_00.img"
		offset = 0
		c = 80
		h = 2
		s = 18
	}

	section disk {
		drive = 1
		type = "ram"
		c = 83
		h = 2
		s = 18

		visible_c = 80
		visible_h = 2
		visible_s = 18
	}

	section disk {
		drive = 128
		type = "dosemu"
		file = "pce_80.img"
		readonly = 1
	}

	section disk {
		drive = 129
                type = "partition"

                c = 1024
                h = 128
                s = 63

		section partition {
			block_start = 0
			block_count = 63
			file = "p0.img"
			readonly = 0
		}
		
		section partition {
			block_start = 63
			block_count = 8257473
			file = "/dev/hda1"
			readonly = 1
		}
        }
}
