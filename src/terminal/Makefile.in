# Makefile
# $Id$

srcdir := @srcdir@
topdir := @top_srcdir@
subdir :=
reldir := ../..


include $(reldir)/config.inc


SRC := font.c null.c scrmap.c terminal.c vt100.c
OBJ := font.o null.o scrmap.o terminal.o vt100.o
HDR := font.h null.h scrmap.h terminal.h vt100.h
BIN := terminal.a

HDR_EXT := libini/libini.h

ifeq "$(PCE_X11_USE)" "1"
	SRC += x11.c
	OBJ += x11.o
	HDR += x11.h
	CC_FLG_EXTRA += $(PCE_X11_CCF)
endif

ifeq "$(PCE_SDL_USE)" "1"
	SRC += sdl.c
	OBJ += sdl.o
	HDR += sdl.h
	CC_FLG_EXTRA += $(PCE_SDL_CCF)
endif

SDP := Makefile $(HDR) $(HDR_EXT)
BDP := Makefile $(OBJ) $(OBJ_EXT)

CLN := $(OBJ) $(BIN)
DCL := Makefile


include $(reldir)/rules.inc


all: $(BIN)


terminal.a: $(OBJ)


font.o:		font.c $(SDP)
null.o:		null.c $(SDP)
scrmap.o:	scrmap.c $(SDP)
sdl.o:		sdl.c $(SDP)
terminal.o:	terminal.c $(SDP)
vt100.o:	vt100.c $(SDP)
x11.o:		x11.c $(SDP)
